LXI H, 3000H
MOV C, M
INX H
MOV D, M
DCR C
L1: INX H
MOV E, M
CALL HCF
DCR C
JNZ L1
INX H
MOV M, D
HLT
HCF: MOV A, D
CMP E
JZ H3
JNC H2
MOV D, E
MOV E, A
H2: MOV A, D
SUB E
MOV D, A
JMP HCF
H3: RET